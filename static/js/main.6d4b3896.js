(()=>{var t={9807:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>M});var n=r(467),o=r(5544),i=r(6665),a=r(6725),u=r(3004),l=r(3929),s=r(6793),c=r(3668),f=r(436),d=r(3029),h=r(2901),g=function(t){return t.Blank=" ",t.Peg="o",t.Wall="x",t}(g||{}),p=function(){function t(e){var r=this;(0,d.default)(this,t),this.board=Array(t.SIZE).fill(null).map((function(e,r){return Array(t.SIZE).fill(null).map((function(t,e){return r>1&&r<5||e>1&&e<5?g.Blank:g.Wall}))})),e.forEach((function(t){var e=(0,o.default)(t,2),n=e[0],i=e[1];return r.board[n][i]=g.Peg})),this.initialBoard=t.copyBoard(this.board)}return(0,h.default)(t,[{key:"reset",value:function(){this.board=t.copyBoard(this.initialBoard)}},{key:"count",value:function(){return this.board.flat().reduce((function(t,e){return e===g.Peg?t+1:t}),0)}},{key:"onBoard",value:function(e,r){return e>=0&&e<t.SIZE&&r>=0&&r<t.SIZE}},{key:"isPeg",value:function(t,e){return this.board[t][e]==g.Peg}},{key:"isBlank",value:function(t,e){return this.board[t][e]==g.Blank}},{key:"getGrid",value:function(t,e){return this.board[t][e]}},{key:"movable",value:function(t,e){return!(!this.onBoard(t,e)||!this.isPeg(t,e))&&0!=this.getLegalDestinations(t,e).length}},{key:"getLegalDestinations",value:function(t,e){var r=this;return[[0,-1],[0,1],[-1,0],[1,0]].reduce((function(n,i){var a=(0,o.default)(i,2),u=a[0],l=a[1],s=t+u,c=e+l,f=s+u,d=c+l;return r.onBoard(f,d)&&r.isPeg(s,c)&&r.isBlank(f,d)&&n.push([f,d]),n}),[])}},{key:"move",value:function(t,e,r,n){var o=(t+r)/2,i=(e+n)/2;this.board[t][e]=g.Blank,this.board[o][i]=g.Blank,this.board[r][n]=g.Peg}}],[{key:"copyBoard",value:function(t){return t.map((function(t){return(0,f.default)(t)}))}}])}();p.SIZE=7;const v=p;var y="ghostwhite",w="lightgray",m="dimgray",b=r(397);function x(t){var e=t.color;return(0,b.jsx)(l.default,{style:j.grid,children:(0,b.jsx)(l.default,{style:{width:"70%",height:"70%",borderRadius:Number.MAX_SAFE_INTEGER,backgroundColor:e}})})}var j=c.default.create({grid:{width:"100%",height:"100%",backgroundColor:w,justifyContent:"center",alignItems:"center"}});const k=function(t){var e,r=t.irow,n=t.icol,o=t.cell,i=t.setCell,a=t.setCount,u=t.game,c=u.getGrid(r,n);return e=o&&o[0]===r&&o[1]===n?(0,b.jsx)(x,{color:"slateblue"}):c===g.Peg?(0,b.jsx)(x,{color:m}):c===g.Wall?(0,b.jsx)(l.default,{style:{width:"100%",height:"100%"}}):(0,b.jsx)(l.default,{style:j.grid}),(0,b.jsx)(s.default,{onPress:function(){u.movable(r,n)?i([r,n]):o&&(i(null),u.getLegalDestinations(o[0],o[1]).forEach((function(t){if(t[0]===r&&t[1]===n)return u.move(o[0],o[1],t[0],t[1]),void a(u.count())})))},style:{flex:1,marginRight:3,marginBottom:3,justifyContent:"center",alignItems:"center"},children:e})};const P=function(t){var e=t.game,r=t.boardLength,n=t.cell,o=t.setCount,i=t.setCell,a=e.board.map((function(t,a){var u=t.map((function(t,r){return(0,b.jsx)(k,{irow:a,icol:r,cell:n,setCell:i,setCount:o,game:e},`grid${a}${r}`)}));return(0,b.jsx)(l.default,{style:{flex:1,width:r,flexDirection:"row"},children:u},`row${a}`)}));return(0,b.jsx)(l.default,{style:{height:r},children:a})};var S=r(6283);const C=function(t){var e=t.title,r=t.onPress;return(0,b.jsx)(s.default,{onPress:r,style:{flex:1,marginVertical:5,padding:8,borderRadius:5,backgroundColor:w,justifyContent:"center",alignItems:"center"},children:(0,b.jsx)(S.default,{numberOfLines:1,style:{color:m,fontSize:24},children:e})})};var E=r(4473),B="http://localhost:3000";function O(t){return t.split("").map((function(t){return function(t){var e="a".charCodeAt(0),r="A".charCodeAt(0),n=t.charCodeAt(0);if(t>="a"&&t<="z")n-=e;else{if(!(t>="A"&&t<="Z"))throw new Error("Only ASCII letters are allowed.");n=n-r+26}return[Math.floor(n/v.SIZE),n%v.SIZE]}(t)}))}function z(){return(z=(0,n.default)((function*(t){var e=yield E.getInitialURL();if(!e)throw new Error("URL not found.");var n=E.parse(e).queryParams;if(!n)throw new Error("Query parameters not found.");var o=n.puzzle;if(!o)throw new Error("Query 'puzzle' not found.");var i=function(t){return r(9926)[t]}(o);if(t){var a=n.signature;if(!a)throw new Error("Query 'signature' not found.");if(!(yield function(t,e){return fetch(B+"/verify-signature",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({puzzle:e,signature:t})}).then((function(t){return t.json()})).then((function(t){return"ok"===t.message})).catch((function(t){throw new Error(t)}))}(a,o)))throw new Error("Signature verification failed.")}return{articleUrl:i,puzzle:o,game:new v(O(o))}}))).apply(this,arguments)}var I=r(9632),L="\u30da\u30b0\u30bd\u30ea\u30c6\u30a3\u30a2,\u30d1\u30ba\u30eb";var A=!1,R=r(935);function M(){var t=(0,i.useState)(),e=(0,o.default)(t,2),r=e[0],u=e[1],s=(0,i.useState)(),c=(0,o.default)(s,2),f=c[0],d=c[1],h=(0,i.useState)(),g=(0,o.default)(h,2),p=g[0],v=g[1],w=(0,i.useState)(),m=(0,o.default)(w,2),x=m[0],j=m[1],k=(0,i.useState)(null),S=(0,o.default)(k,2),E=S[0],B=S[1],O=(0,i.useState)(0),R=(0,o.default)(O,2),M=R[0],U=R[1],Z=(0,i.useState)(!1),F=(0,o.default)(Z,2),$=F[0],_=F[1],q=(0,i.useRef)(null);(0,i.useEffect)((function(){var t=q.current;if($&&t){var e=function(){t.measure((function(t,e,r,n,o,i){var u=a.default.get("window"),l=Math.min(u.height-n-15,u.width-17);U(l)}))};e();var r=a.default.addEventListener("change",e);return function(){return r.remove()}}}),[$]),(0,i.useEffect)((function(){var t=function(){var t=(0,n.default)((function*(){var t=yield function(t){return z.apply(this,arguments)}(A),e=t.articleUrl,r=t.puzzle,n=t.game;u(e),d(r),v(n),j(n.count())}));return function(){return t.apply(this,arguments)}}();t()}),[]);var D=function(t){t?function(t){var e=`https://twitter.com/intent/tweet?text=${encodeURIComponent("\u3053\u3053\u306b\u30b3\u30e1\u30f3\u30c8")}&url=${encodeURIComponent(t)}&hashtags=${encodeURIComponent(L)}`;I.default.openURL(e).catch((function(t){return console.error("An error occurred",t)}))}(t):window.alert("\u3053\u306e\u30d1\u30ba\u30eb\u306b\u5bfe\u5fdc\u3059\u308bTwitter\u8a18\u4e8b\u306eURL\u304c\u767b\u9332\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002")};return f&&p&&x?($||_(!0),(0,b.jsxs)(l.default,{style:{flex:1,backgroundColor:y,paddingTop:10,paddingLeft:10},children:[(0,b.jsxs)(l.default,{style:{position:"relative"},children:[(0,b.jsx)(P,{game:p,boardLength:M,cell:E,setCell:B,setCount:j}),x<=1&&(0,b.jsx)(T,{boardLength:M})]}),(0,b.jsxs)(l.default,{ref:q,style:{width:M,paddingTop:2},children:[(0,b.jsx)(C,{title:"\u306f\u3058\u3081\u304b\u3089\u3084\u308a\u306a\u304a\u3059",onPress:function(){p&&(p.reset(),j(p.count()),B(null))}}),(0,b.jsx)(C,{title:"\u30c4\u30a4\u30c3\u30bf\u30fc\u3067\u30b7\u30a7\u30a2\u3059\u308b",onPress:function(){return D(r)}})]})]})):(0,b.jsx)(l.default,{style:{flex:1}})}function T(t){var e=t.boardLength,r=e/1.618,n=(e-r)/2;return(0,b.jsx)(u.default,{style:{position:"absolute",resizeMode:"contain",width:r,height:r,top:n,left:n},source:R})}},935:(t,e,r)=>{"use strict";t.exports=r.p+"static/media/stamp.2b496c1bea767406bc56.png"},2634:()=>{},9926:t=>{"use strict";t.exports=JSON.parse('{"pqsty":"https://twitter.com/PegsolitireBot/status/1783733955155673318","xyzFM":"https://twitter.com/PegsolitireBot/status/1783733955155673318","kpqrst":"https://twitter.com/PegsolitireBot/status/1783733955155673318","wxzAFM":"https://twitter.com/PegsolitireBot/status/1783733955155673318","kqrsyF":"https://twitter.com/PegsolitireBot/status/1783733955155673318","rwxzAF":"https://twitter.com/PegsolitireBot/status/1783733955155673318","xyzEGM":"https://twitter.com/PegsolitireBot/status/1783733955155673318"}')}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n].call(i.exports,i,i.exports,r),i.exports}r.m=t,(()=>{var t=[];r.O=(e,n,o,i)=>{if(!n){var a=1/0;for(c=0;c<t.length;c++){for(var[n,o,i]=t[c],u=!0,l=0;l<n.length;l++)(!1&i||a>=i)&&Object.keys(r.O).every((t=>r.O[t](n[l])))?n.splice(l--,1):(u=!1,i<a&&(a=i));if(u){t.splice(c--,1);var s=o();void 0!==s&&(e=s)}}return e}i=i||0;for(var c=t.length;c>0&&t[c-1][2]>i;c--)t[c]=t[c-1];t[c]=[n,o,i]}})(),r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.p="/",(()=>{var t={792:0};r.O.j=e=>0===t[e];var e=(e,n)=>{var o,i,[a,u,l]=n,s=0;if(a.some((e=>0!==t[e]))){for(o in u)r.o(u,o)&&(r.m[o]=u[o]);if(l)var c=l(r)}for(e&&e(n);s<a.length;s++)i=a[s],r.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return r.O(c)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})();var n=r.O(void 0,[926],(()=>r(5036)));n=r.O(n)})();
//# sourceMappingURL=main.6d4b3896.js.map